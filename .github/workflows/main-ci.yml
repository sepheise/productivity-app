name: main-ci
on: 
  push:
    branches:
      - 'setup-ci'
jobs:
  checkout:
    runs-on: macos-12
    steps:
      - name: Check out repository code
        uses: actions/checkout@v3
  build:
    runs-on: macos-12
    steps:
      - name: Build
        run: |
          xcodebuild build-for-testing \
            -project ProductivityFW/ProductivityFW.xcodeproj \
            -scheme CI \
            CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO
  test:
    runs-on: macos-12
    steps:
      - name: Run CI scheme Tests
        run: |
          xcodebuild test \
            -project ProductivityFW/ProductivityFW.xcodeproj \
            -scheme CI \
            -resultBundlePath build/ResultBundle.xcresult 
